##系统结构
系统划分为4个主要的系统：目标网站数据抓取&解析系统、数据任务派发、索引系统以及/Users/geniusfox/百度云同步盘/Works/Beacon统计系统/GA系统前端JS功能分析.pptx前端搜索展示系统。 整个后端通过任务派发系统的控制不断的抓取P2P网站的项目信息；索引系统负责清洗和索引抓取的P2P项目信息供前段搜索展现。
###数据抓取&解析
* 根据任务系统派发的抓取任务，通过CRUL包直接抓取P2P网站的项目列表页面（未来包括项目的详情页面）
* 通过网页模板解析，将数据写入临时项目列表
* 如果抓取失败或解析条目为0，默认为失败，更新项目状态
####[数据抓取系统文档](spiders.md)

###任务管理和派发
###数据索引
* 定时开始扫描是否有新的数据入库
* 比对新的数据是否包含新的项目，直接加入到项目列表中
* 如果是即有项目，则比对是否更新[“贷款进度”、“项目状态”、“融资额度”]
* 将项目列表中有效的项目[融资进度<100%]进行索引替换掉线上数据


###前端搜索展现
基于RESTFul Webservie思想设计，直接通过接口获取Json格式的数据。前端完全通过JS实现数据展现、排序和过滤和翻页的功能。

* 融资项目实际收益率的计算，根据当前时间、起息的时间和还款方式结算；

##系统问题
* 如果不基于JMS的消息系统如何构建分布的任务系统
* RESTFul是否能完成所有的数据交互任务

##系统名词解释
* Jobs
* Task

##P2P项目数据的生命周期(status code)
* 0 项目创建：项目名称、项目总额、期限、还款方式、风险等级、借款类型，起投金额、最大投资金额
* 100 开始募资：每笔投资的金额、投资人、时间
* 200 募资结束：满标/流标；
* 300 项目开始运行，资金开始计息
* 400开始还款：每笔是否按时还款或者预期
* 500 项目结束：本利偿清、预期坏账..


##Python项目依赖
* pip install pycurl #网页数据抓取
* pip install mysql-python # mysql数据库连接
* pip install SQLAlchemy #ORM 
* pip install Flask #前端web服务器框架
* pip install apscheduler #定时任务系统
		ps axu | grep {脚本名} | grep -v grep | awk '{print $2;}' | xargs kill  


